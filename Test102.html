<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>EREBUS INITIATIVE :: M.I.N.D. Honeypot Interface</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
    <style>
        /*
         * EPICFRAUDS.COM // JUSTICE, EXPOSED.
         * Project Chimera // Version 4.2 Final System Takeover Module
         * Developed by: AETOS Cybernetics Systems - Project Development Team (x1000)
         * Status: ONLINE / OPERATIONAL
         * Confidentiality Level: TOP SECRET // EYES ONLY
         */

        :root {
            --bg-color: #0000AA; /* Windows Blue Screen Blue */
            --scanline-color: rgba(255, 255, 255, 0.1); /* White scanlines on blue */
            --glow-color: rgba(170, 255, 255, 0.8); /* Light blue/cyan glow */
            --text-color: #FFFFFF; /* White text */
            --error-color: #FF0000; /* Red error */
            --warning-color: #FFFF00; /* Yellow warning */
            --info-color: #AAFFFF; /* Light blue info */
            --accent-color: #FFFF00; /* Yellow accent */
            --crash-text-color: #FFFFFF;
            --crash-glow-color: rgba(255, 255, 255, 0.9);
            --matrix-color: rgba(170, 255, 255, 0.1); /* Subtle matrix rain blue */
            --matrix-char-color: rgba(170, 255, 255, 0.6); /* Brighter matrix characters */
            --cursor-trail-color: rgba(255, 255, 255, 0.3); /* White transparent trail */
        }

        html, body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Share Tech Mono', 'Consolas', 'Monaco', monospace;
            font-size: 16px;
            margin: 0; padding: 0;
            overflow: hidden;
            cursor: none;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            user-select: none;
            -webkit-font-smoothing: antialiased;
            text-rendering: optimizeLegibility;
        }

        #crt-container {
            width: 100vw; height: 100vh;
            overflow: hidden;
            position: relative;
            background: radial-gradient(ellipse at center, rgba(170,255,255,0.05) 0%, transparent 70%);
            box-shadow: inset 0 0 50px rgba(170, 255, 255, 0.2);
            animation: text-flicker 2.5s linear infinite alternate;
            /* Removed border-radius and transform for flat screen */
        }

        /* Glitch Effect */
        body.glitch-active #crt-container {
            animation: text-flicker 0.1s linear infinite,
                       glitch-flicker 0.05s infinite alternate;
        }
        @keyframes glitch-flicker {
            0% { transform: translate(0px, 0px) skewX(0deg); opacity: 1; }
            30% { transform: translate(2px, 1px) skewX(0.5deg); opacity: 0.8; }
            31% { transform: translate(-3px, -2px) skewX(-1deg); opacity: 1; }
            60% { transform: translate(1px, -1px) skewX(0.2deg); opacity: 0.9; }
            100% { transform: translate(0px, 0px) skewX(0deg); opacity: 1; }
        }

        /* Power Outage / Screen Shake Effect */
        body.power-outage #crt-container {
            animation: screen-shake 0.1s linear infinite alternate,
                       text-flicker-heavy 0.05s linear infinite;
            filter: brightness(0.7) contrast(1.2) hue-rotate(5deg);
        }
        @keyframes screen-shake {
            0% { transform: translate(1px, 1px); }
            25% { transform: translate(-1px, -1px); }
            50% { transform: translate(1.5px, -0.5px); }
            75% { transform: translate(-0.5px, 1.5px); }
            100% { transform: translate(1px, 1px); }
        }
        @keyframes text-flicker-heavy {
            0%, 100% { opacity: 1; } 10% { opacity: 0.7; } 20% { opacity: 1; }
            30% { opacity: 0.6; } 40% { opacity: 1; } 50% { opacity: 0.5; }
            60% { opacity: 1; } 70% { opacity: 0.8; } 80% { opacity: 1; }
            90% { opacity: 0.7; }
        }

        #terminal {
            width: calc(100% - 40px); height: calc(100% - 40px);
            padding: 20px; box-sizing: border-box;
            overflow-y: scroll; white-space: pre-wrap;
            word-break: break-all;
            text-shadow: 0 0 8px var(--glow-color), 0 0 4px rgba(0,0,0,0.5);
            scrollbar-width: none;
            position: relative; z-index: 2; transform: translateZ(0);
        }
        #terminal::-webkit-scrollbar { display: none; }

        #scanline-overlay {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            pointer-events: none;
            background: repeating-linear-gradient(0deg, var(--scanline-color), var(--scanline-color) 1px, transparent 1px, transparent 4px);
            animation: crt-flicker 0.1s infinite step-end;
            opacity: 0.9; z-index: 3;
        }

        /* Intense flicker for data transfer phase */
        #scanline-overlay.intense-flicker {
            animation: crt-flicker-intense 0.03s infinite step-end,
                       chromatic-flicker 0.1s linear infinite alternate;
            opacity: 0.98;
        }
        @keyframes crt-flicker-intense {
            0%, 100% { opacity: 0.98; } 25% { opacity: 0.6; } 50% { opacity: 0.95; } 75% { opacity: 0.65; }
        }
        @keyframes chromatic-flicker {
            0% { filter: hue-rotate(0deg); } 25% { filter: hue-rotate(2deg); } 50% { filter: hue-rotate(0deg); }
            75% { filter: hue-rotate(-2deg); } 100% { filter: hue-rotate(0deg); }
        }

        #vignette-overlay {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            pointer-events: none;
            box-shadow: inset 0 0 100px rgba(0,0,0,0.8); z-index: 4;
        }

        #matrix-overlay {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            pointer-events: none; overflow: hidden; z-index: 1; opacity: 0.08;
        }
        .matrix-column {
            position: absolute; width: 15px; white-space: nowrap; overflow: hidden;
            font-family: 'Share Tech Mono', monospace; font-size: 14px;
            color: var(--matrix-char-color); text-shadow: 0 0 5px var(--matrix-char-color);
            animation: matrix-fall linear infinite;
        }
        @keyframes matrix-fall { from { transform: translateY(-100%); } to { transform: translateY(100vh); } }

        @keyframes crt-flicker { 0%, 100% { opacity: 0.95; } 50% { opacity: 0.85; } }
        @keyframes text-flicker { 0% { opacity: 0.99; } 2% { opacity: 0.5; } 4% { opacity: 0.99; } 100% { opacity: 0.99; } }

        /* Chromatic Aberration (on terminal, not overlay) */
        #terminal::before, #terminal::after {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            z-index: -1; pointer-events: none;
        }
        #terminal::before { background-color: rgba(255, 0, 0, 0.02); transform: translate(-1px, -1px); }
        #terminal::after { background-color: rgba(0, 0, 255, 0.02); transform: translate(1px, 1px); }

        .cursor {
            display: inline-block; background-color: var(--text-color);
            box-shadow: 0 0 12px var(--glow-color); width: 12px; height: 20px;
            animation: blink 0.7s step-end infinite; margin-left: 6px; vertical-align: bottom;
        }
        .cursor.off { animation: none; background-color: transparent; box-shadow: none; }
        @keyframes blink { 50% { background-color: transparent; box-shadow: none; } }
        .hidden { display: none; }
        .error { color: var(--error-color); text-shadow: 0 0 9px var(--error-color); }
        .warning { color: var(--warning-color); text-shadow: 0 0 9px var(--warning-color); }
        .success { color: #88FF88; text-shadow: 0 0 9px #88FF88; }
        .info { color: var(--info-color); text-shadow: 0 0 9px var(--info-color); }
        .accent { color: var(--accent-color); text-shadow: 0 0 9px var(--accent-color); }
        .dim { color: #AAAAAA; text-shadow: 0 0 3px #AAAAAA; }

        .progress-bar-container {
            border: 1px solid var(--text-color); padding: 3px; width: 75%; margin: 8px 0;
            box-shadow: inset 0 0 8px var(--glow-color); position: relative; overflow: hidden; background-color: rgba(0,0,0,0.3);
        }
        .progress-bar-fill {
            background-color: var(--text-color); height: 18px; width: 0%;
            transition: width 0.3s cubic-bezier(0.61,0.01,0.33,1.01);
        }
        .progress-bar-fill::after {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(45deg, rgba(255,255,255,0.15) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.15) 50%, rgba(255,255,255,0.15) 75%, transparent 75%, transparent);
            background-size: 20px 20px; animation: progress-stripes 0.5s linear infinite;
        }
        @keyframes progress-stripes { from { background-position: 20px 0; } to { background-position: 0 0; } }
        .progress-time { font-size: 0.9em; color: var(--dim); margin-left: 10px; }

        .ascii-3d {
            transform: perspective(600px) rotateX(2deg) rotateY(-3deg) scale(1.01);
            text-shadow: 3px 3px 10px rgba(170, 255, 255, 0.4); display: block; line-height: 1;
        }

        /* Mouse effects */
        .mouse-trail {
            position: absolute; background-color: var(--cursor-trail-color); border-radius: 50%;
            pointer-events: none; opacity: 0; transform: scale(0); animation: fadeOutTrail 0.5s forwards;
            box-shadow: 0 0 5px var(--cursor-trail-color); z-index: 100; width: 10px; height: 10px;
        }
        @keyframes fadeOutTrail { from { opacity: 1; transform: scale(1); } to { opacity: 0; transform: scale(2); } }
        body.mouse-jitter { cursor: none !important; }
        body.mouse-jitter #custom-cursor { transition: transform 0.01s ease-out; }
        #custom-cursor {
            position: fixed; width: 16px; height: 16px; background-color: var(--text-color); border-radius: 50%;
            box-shadow: 0 0 10px var(--glow-color), 0 0 20px rgba(170, 255, 255, 0.5); pointer-events: none;
            z-index: 99; transform: translate(-50%, -50%);
        }

        /* Joker ASCII Overlay */
        #joker-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            pointer-events: none;
            z-index: 10;
            opacity: 0;
            transition: opacity 0.3s ease-out;
        }

        #joker-overlay.show {
            opacity: 0.7;
            animation: joker-flash 2.5s ease-in-out forwards; /* Longer duration */
        }

        @keyframes joker-flash {
            0% { opacity: 0; transform: scale(0.7); }
            20% { opacity: 0.7; transform: scale(1.0); }
            80% { opacity: 0.7; transform: scale(1.0); }
            100% { opacity: 0; transform: scale(1.3); }
        }

        #joker-overlay pre {
            font-family: 'Share Tech Mono', monospace;
            font-size: clamp(30px, 15vw, 150px);
            color: var(--text-color);
            text-shadow: 0 0 20px var(--glow-color);
            line-height: 0.8;
            margin: 0; padding: 0;
            transform: scaleY(0.7);
            filter: blur(1px) contrast(1.5);
        }

        /* Hidden disclaimer */
        #hidden-disclaimer {
            position: absolute; top: 500vh; left: 0; width: 100%; text-align: center;
            font-size: 10px; color: rgba(255, 255, 255, 0.1); padding: 20px; white-space: pre-wrap;
            user-select: text; cursor: default; text-transform: none;
        }
    </style>
</head>
<body>
<div id="matrix-overlay"></div>
<div id="scanline-overlay"></div>
<div id="vignette-overlay"></div>
<div id="crt-container">
    <div id="terminal">
        <div id="output"></div>
        <div id="input-line" class="hidden">
            <span id="prompt">&gt; </span>
            <span id="input"></span>
            <span class="cursor"></span>
        </div>
    </div>
</div>


<div id="hidden-disclaimer">
    <p>
        -------------------------------------------------------------<br>
        ATTENTION! YOU HAVE STUMBLED UPON EPICFRAUDS.COM!<br>
        -------------------------------------------------------------<br>
        <br>
        THIS WEBSITE IS PURELY FOR ENTERTAINMENT PURPOSES. IT IS A PARODY<br>
        AND A JOKE DESIGNED TO PRANK YOUR FRIENDS. ABSOLUTELY NO MALICIOUS<br>
        ACTIVITY OR DATA COMPROMISE IS ACTUALLY OCCURRING.<br>
        <br>
        ALL "HACKING" SIMULATIONS, "IP ADDRESSES," "FILE DOWNLOADS," AND<br>
        "SYSTEM INFECTIONS" ARE FICTIONAL AND PART OF THE SCRIPTED DISPLAY.<br>
        YOUR DEVICE HAS NOT BEEN COMPROMISED. YOUR DATA IS SAFE.<br>
        <br>
        DO NOT USE THIS SCRIPT FOR ANY ACTUAL ILLEGAL OR HARMFUL ACTIVITIES.<br>
        IT IS INTENDED SOLELY FOR HUMOROUS PRANKS AND LIGHTHEARTED FUN.<br>
        <br>
        BY CONTINUING TO USE THIS SITE, YOU ACKNOWLEDGE AND AGREE TO THIS DISCLAIMER.<br>
        PLEASE PLAY RESPONSIBLY AND ETHICALLY.<br>
        <br>
        © 2025 EPICFRAUDS.COM - ALL JOKES RESERVED.<br>
        DEVELOPER TEAM: The AETOS Cybernetics Systems Group (Est. 2020)<br>
        CONTACT: support@epicfrauds.com (No, really, it's fake too!)
        <br>
        -------------------------------------------------------------
    </p>
</div>


<script>
    // --- Tone.js Synths ---
    let audioEnabled = false, synths = {};
    let humPitchModulationInterval = null;

    function setupAudio() {
        if (audioEnabled) return;
        try {
            Tone.start();
            synths.keypress = new Tone.MembraneSynth({ oscillator: { type: 'sine' }, envelope: { attack: 0.001, decay: 0.05, sustain: 0.01, release: 0.05 }, volume: -20 }).toDestination();
            synths.success = new Tone.Synth({ oscillator: { type: 'triangle' }, envelope: { attack: 0.01, decay: 0.2, sustain: 0.1, release: 0.5 }, volume: -10 }).toDestination();
            synths.error = new Tone.Synth({ oscillator: { type: 'sawtooth' }, envelope: { attack: 0.01, decay: 0.1, sustain: 0.05, release: 0.2 }, volume: -10 }).toDestination();
            
            synths.hum = new Tone.AMOscillator('F#1', 'sine', 'square').toDestination();
            synths.hum.volume.value = -15; /* Louder hum */
            synths.hum.start();

            const humLFO = new Tone.LFO(20, -1, 1); /* Faster LFO, more depth for jitter */
            humLFO.connect(synths.hum.detune);
            humLFO.start();

            synths.alert = new Tone.PluckSynth({ attackNoise: 1, dampening: 4000, resonance: 0.7, volume: -12 }).toDestination();
            synths.scan = new Tone.NoiseSynth({ noise: { type: 'white' }, envelope: { attack: 0.005, decay: 0.1, sustain: 0.02, release: 0.1 }, volume: -15 }).toDestination();
            synths.confirm = new Tone.MembraneSynth({ pitchDecay: 0.08, octaves: 6, envelope: { attack: 0.001, decay: 0.3, sustain: 0.05, release: 0.3 }, volume: -10 }).toDestination();
            synths.glitch = new Tone.NoiseSynth({ noise: { type: 'brownian' }, envelope: { attack: 0.001, decay: 0.05, sustain: 0.01, release: 0.05 }, volume: -20 }).toDestination();
            
            synths.staticBurst = new Tone.NoiseSynth({
                noise: { type: 'white' },
                envelope: { attack: 0.001, decay: 0.3, sustain: 0, release: 0.3 },
                volume: -10
            }).toDestination();
            synths.powerDown = new Tone.MembraneSynth({
                pitchDecay: 0.2, octaves: 10, envelope: { attack: 0.001, decay: 0.8, sustain: 0.01, release: 0.5 }, volume: -5
            }).toDestination();
            synths.powerUp = new Tone.MembraneSynth({
                pitchDecay: 0.2, octaves: 10, envelope: { attack: 0.001, decay: 0.8, sustain: 0.01, release: 0.5 }, volume: -5
            }).toDestination();

            audioEnabled = true;
        } catch (e) {
            console.error("Failed to setup audio. Continuing without sound:", e);
            audioEnabled = false;
        }
    }

    function playSound(sound, note = 'C4', duration = '8n') {
        if (!audioEnabled) return;
        try {
            if (synths[sound]) {
                if (sound === 'keypress' || sound === 'scan' || sound === 'glitch' || sound === 'staticBurst' || sound === 'powerDown' || sound === 'powerUp') {
                    synths[sound].triggerAttackRelease(duration);
                } else {
                    synths[sound].triggerAttackRelease(note, duration);
                }
            }
        } catch (e) { console.warn("Audio playback failed for", sound, ":", e); }
    }

    // --- Terminal Logic ---
    const term = {
        output: document.getElementById('output'),
        /* inputLine, prompt, input, cursor are not used as part of takeover.html's direct load */
        crtContainer: document.getElementById('crt-container'),
        scanlineOverlay: document.getElementById('scanline-overlay'),
        customCursor: document.getElementById('custom-cursor'),
        jokerOverlay: document.getElementById('joker-overlay') /* Reference to Joker overlay */
    };
    const sleep = ms => new Promise(r => setTimeout(r, ms));
    let mouseJitterInterval = null;

    // --- Mouse Trail Effect ---
    document.addEventListener('mousemove', (e) => {
        if (term.customCursor) {
            term.customCursor.style.left = `${e.clientX}px`;
            term.customCursor.style.top = `${e.clientY}px`;
        }
        const trail = document.createElement('div');
        trail.classList.add('mouse-trail');
        trail.style.left = `${e.clientX}px`;
        trail.style.top = `${e.clientY}px`;
        document.body.appendChild(trail);
        trail.addEventListener('animationend', () => {
            trail.remove();
        });
    });

    // --- Mouse Jitter Effect Functions ---
    function startMouseJitter() {
        document.body.classList.add('mouse-jitter');
        const jitterAmount = 50; /* Much crazier jitter */
        const intervalTime = 10; /* Even faster updates */
        mouseJitterInterval = setInterval(() => {
            if (term.customCursor) {
                const offsetX = (Math.random() - 0.5) * jitterAmount * 2;
                const offsetY = (Math.random() - 0.5) * jitterAmount * 2;
                term.customCursor.style.transform = `translate(-50%, -50%) translate(${offsetX}px, ${offsetY}px)`;
            }
        }, intervalTime);
    }
    function stopMouseJitter() {
        clearInterval(mouseJitterInterval);
        mouseJitterInterval = null;
        document.body.classList.remove('mouse-jitter');
        if (term.customCursor) {
            term.customCursor.style.transform = `translate(-50%, -50%)`;
        }
    }

    // --- Matrix Rain Effect ---
    function createMatrixRain() {
        const matrixOverlay = document.getElementById('matrix-overlay');
        const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+-=[]{};':\"|,./<>?";
        const columnCount = Math.floor(window.innerWidth / 15);
        for (let i = 0; i < columnCount; i++) {
            const column = document.createElement('div');
            column.classList.add('matrix-column');
            column.style.left = `${i * 15}px`;
            column.style.animationDuration = `${Math.random() * 5 + 3}s`;
            column.style.animationDelay = `-${Math.random() * 5}s`;
            matrixOverlay.appendChild(column);
            let columnText = '';
            for (let j = 0; j < 50; j++) { columnText += chars[Math.floor(Math.random() * chars.length)] + '\n'; }
            column.textContent = columnText;
        }
    }

    async function getVisitorData() { /* Simplified for brevity, same as previous */
        const data = {};
        data.ua = navigator.userAgent; data.platform = navigator.platform; data.language = navigator.language;
        data.screen = `${window.screen.width}x${window.screen.height}x${window.screen.colorDepth}`;
        data.os = (ua => ua.includes("Win") ? "WINDOWS NT" : ua.includes("Mac") ? "DARWIN/MACOS" : ua.includes("Linux") ? "LINUX KERNEL" : "UNKNOWN")(data.ua);
        data.browser = (ua => ua.includes("Firefox") ? "FIREFOX" : ua.includes("Chrome") ? "CHROMIUM-BASED" : ua.includes("Safari") ? "WEBKIT/SAFARI" : "GENERIC")(data.ua);
        data.cores = navigator.hardwareConcurrency || 'N/A';
        try { /* Stubbed out actual API call for brevity */
            data.ip = '192.168.1.100'; data.org = 'UNRESOLVED'; data.location = 'UNDEFINED'; data.vpn = false;
            data.lat = 'N/A'; data.lon = 'N/A';
        } catch (e) {
            console.warn("Geolocation API failed:", e); data.ip = '0.0.0.0'; data.org = 'UNRESOLVED'; data.location = 'UNDEFINED'; data.vpn = true; data.lat = 'N/A'; data.lon = 'N/A';
        }
        return data;
    }

    async function scrollLog(lines, delay = 50) { // Increased default delay for slower scrolling
        for (const line of lines) {
            term.output.innerHTML += `<span>${line}</span>\n`;
            term.output.parentElement.scrollTop = term.output.parentElement.scrollHeight;
            await sleep(delay);
        }
    }

    async function showAscii(asciiLines, className = 'accent', delay = 100) { // Increased default delay
        for(const line of asciiLines) {
            term.output.innerHTML += `<span class="${className}">${line}</span>\n`;
            term.output.parentElement.scrollTop = term.output.parentElement.scrollHeight;
            await sleep(delay);
        }
    }

    async function renderProgressBar(label, duration = 1000) {
        const startTime = performance.now();
        const container = document.createElement('div');
        container.innerHTML = `<span>${label}</span><div class="progress-bar-container"><div class="progress-bar-fill"></div></div><span class="progress-time"></span>`;
        term.output.appendChild(container);
        const fill = container.querySelector('.progress-bar-fill');
        const timeSpan = container.querySelector('.progress-time');
        term.output.parentElement.scrollTop = term.output.parentElement.scrollHeight;
        playSound('scan', 'C3', '32n'); await sleep(100);
        fill.style.width = '100%'; await sleep(duration);
        playSound('confirm', 'C6', '64n');
        const endTime = performance.now(); const timeTaken = ((endTime - startTime) / 1000).toFixed(2);
        timeSpan.textContent = ` (${timeTaken}s)`;
        await scrollLog(['<span class="success">COMPLETE.</span>'], 30); // Slight delay for completion message
    }

    async function triggerGlitch(duration = 500) {
        document.body.classList.add('glitch-active');
        playSound('glitch', null, '0.1s'); await sleep(duration);
        document.body.classList.remove('glitch-active');
    }
    
    async function powerOutageEffect(durationMs = 3000) {
        document.body.classList.add('power-outage');
        playSound('powerDown', 'C1', '2s'); playSound('staticBurst', null, '0.5s');
        const startTime = performance.now();
        while (performance.now() - startTime < durationMs) {
            term.crtContainer.style.filter = `brightness(${0.7 + Math.random() * 0.3}) contrast(${1.2 + Math.random() * 0.3}) hue-rotate(${Math.random() * 10 - 5}deg)`;
            term.scanlineOverlay.style.opacity = `${0.6 + Math.random() * 0.4}`;
            if (Math.random() < 0.2) playSound('staticBurst', null, '0.1s');
            await sleep(50 + Math.random() * 50);
        }
        document.body.classList.remove('power-outage');
        term.crtContainer.style.filter = ''; term.scanlineOverlay.style.opacity = '0.9';
        playSound('powerUp', 'C6', '0.5s');
    }

    /* New Joker Flash Function */
    async function flashJokerMask(duration = 1000) {
        if (!term.jokerOverlay) { /* Ensure element exists */
            console.warn("Joker overlay not found. Skipping flash.");
            return;
        }
        term.jokerOverlay.classList.remove('hidden');
        term.jokerOverlay.classList.add('show');
        playSound('alert', 'A4', '0.2s'); /* A sharp, quick alert sound */
        await sleep(duration);
        term.jokerOverlay.classList.remove('show');
        term.jokerOverlay.classList.add('hidden');
    }

    async function rapidIpScan(baseIp, count = 40, delay = 50) { // Increased delay for slower scan
        await scrollLog(['<span class="info">NETWORK INFECTION: LATERAL MOVEMENT...</span>'], 50);
        const ipParts = baseIp.split('.'); const base = ipParts.slice(0, 3).join('.');
        for (let i = 0; i < count; i++) {
            const randomLastOctet = Math.floor(Math.random() * 254) + 1;
            const currentIp = `${base}.${randomLastOctet}`;
            const status = Math.random() > 0.3 ? '<span class="success">[COMPROMISED]</span>' : '<span class="warning">[DENIED]</span>';
            term.output.innerHTML += `<span>  > ACCESS: ${currentIp} ${status}</span>\n`;
            term.output.parentElement.scrollTop = term.output.parentElement.scrollHeight;
            playSound('keypress', null, '32n'); await sleep(delay);
        }
        await scrollLog(['<span class="success">LATERAL MOVEMENT COMPLETE.</span>'], 50);
    }

    // --- Main Compromise Sequence ---
    async function startCompromiseSequence() {
        // Setup initial state for this page (runs on load)
        createMatrixRain(); /* Starts Matrix Rain for the takeover page */
        setupAudio(); /* Starts audio context and hum */
        
        const d = await getVisitorData();
        window.visitor_data = d;

        await scrollLog([ /* Condensed BIOS/Boot logs */
            'BIOS INITIALIZING...',
            'MEMORY: 4096GB DDR6 ECC, CPU: XEON E8-9590 vPro, CORES: 192',
            'FIRMWARE: VERIFIED',
            'SECURE BOOT: ENABLED',
            'AETOS CYBERNETIC SYSTEMS',
        ], 30); await sleep(500); // Slower initial log
        await showAscii([ /* Condensed ASCII */
            "        _     _____ _______  ____ ",
            "       / \\   |_  _|__  /  \\ ",
            "      / _ \\    | |    / /| |",
            "     / ___ \\   | |   / /_| |",
            "    /_/   \\_\\  |_|  /____|_|"
        ], 'info ascii-3d', 100); await sleep(200); // Slower ASCII reveal
        await scrollLog([ /* Condensed Kernel/Filesystem */
            'LOADING KERNEL... [LOADED]',
            'KERNEL INTEGRITY: [HASH MATCH]',
            'SYSTEMD: [ACTIVE]',
            'FSCK PASSED. INTEGRITY: [██████████████████] 100%'
        ], 35); // Slower kernel log
        await renderProgressBar('INITIALIZING CORE SYSTEM MODULES...', 800); await sleep(400); // Slower progress bar
        await scrollLog([ /* Network/Auth details */
            'NETWORK: ACTIVE | FIREWALL: ONLINE',
            'SSH: SECURE',
            'REMOTE DESKTOP: CRITICAL',
            'ANONYMOUS ROOT ACCESS: ENABLED',
            'VISITOR PRIVILEGES: ELEVATED (ROOT)',
            '',
            'AUTHENTICATING SESSION...',
            ` - VISITOR HASH: ${Math.random().toString(36).slice(2,10).toUpperCase()}`,
            ' - SECURITY CLEARANCE: TOP SECRET',
            ' - THREATS: NONE DETECTED'
        ], 50); await sleep(1000); // Slower authentication log

        await showAscii([ /* Condensed ASCII */
            "         ______ _____  _____ ",
            "        | ____|  __ \\| ____|",
            "        | |__  | |__) | |__ ",
            "        |  __| |  _  /|  __|",
            "        | |____| | \\ \\| |___",
            "        |______|__|  \\_\\______"
        ], 'accent ascii-3d', 100); await sleep(200);

        await showAscii([
            "    0 1 0 0 1 1",
            "    1 0 1 1 0 1 0",
            "  0 1 0 1 0 1 1 0",
            "    1 0 1 0 0 1 0",
            "    0 1 1 1 0 1"
        ], 'accent ascii-3d', 100); await sleep(200);

        await scrollLog([
            'INITIATING VISITOR DEVICE INTELLIGENCE ACQUISITION...',
            '<span class="dim">    (SYSTEM FINGERPRINTING & ENVIRONMENTAL SCAN...)</span>'
        ], 40); // Slower initial scan message
        await renderProgressBar('PERFORMING DEEP SCAN OF CLIENT ENVIRONMENT...', 1000); await sleep(500); // Slower scan progress
        
        const visitor_data = window.visitor_data || await getVisitorData();
        await scrollLog([ /* Visitor profile details */
            '-----------------------------------------------------',
            '| <span class="accent">VISITOR SYSTEM PROFILE / THREAT ASSESSMENT</span>      |',
            '-----------------------------------------------------',
            `> IP_ADDRESS          : <span class="warning">${visitor_data.ip || '?'}</span>`,
        ], 80); // Slower reveal of profile, especially IP
        await sleep(5000); // **PAUSE FOR 5 SECONDS ON IP ADDRESS**
        await scrollLog([
            `> GEO-LOCATION        : <span class="warning">${visitor_data.location || '?'}</span>`,
            `> OS_PLATFORM         : <span class="info">${visitor_data.os}</span> / <span class="info">${visitor_data.platform}</span>`,
            `> BROWSER_AGENT       : <span class="info">${visitor_data.browser}</span>`,
            `> GPU                 : <span class="info">${visitor_data.gpu}</span>`,
            '-----------------------------------------------------'
        ], 80); await sleep(500); // Slower remaining profile details

        await scrollLog(['<span class="success">M.I.N.D. LINK ESTABLISHED. PROTOCOL SYNCHRONIZED.</span>', '<span class="success">PRIVILEGES: ROOT ACCESS [ADMINISTRATIVE CONTROL]</span>', ''], 80); // Slower link establishment
        await scrollLog(['<span class="info">INITIATING HIGH-SPEED DATA EXFILTRATION & SYSTEM INFECTION...</span>'], 60); await sleep(800); // Slower exfiltration initiation

        term.scanlineOverlay.classList.add('intense-flicker');
        startMouseJitter();

        await rapidIpScan(visitor_data.ip || '192.168.1.1', 40, 20); await sleep(500); // Slower IP scan
        await flashJokerMask(2000); /* Flash Joker after IP scan, longer duration */
        await sleep(500); /* Pause after flash */

        await renderProgressBar('ENCRYPTED TUNNEL ESTABLISHMENT: QUANTUM_SECURE_CHANNEL...', 1500); // Slower progress
        await scrollLog(['<span class="warning">DEPLOYING AUTONOMOUS TRACKING MODULE... [OK]</span>'], 80); await sleep(150); // Slower logging
        await renderProgressBar('OS_LEVEL HOOK INJECTION: KERNEL_API_INTERCEPTION...', 2000);
        await scrollLog(['<span class="error">MEMORY DUMP INITIATED: VOLATILE_DATA_ACQUISITION... [LIVE]</span>'], 80); await sleep(150);
        await renderProgressBar('DOWNLOADING /SYSTEM_DATA/USER_PROFILES/DOCUMENTS.zip...', 1800);
        await scrollLog(['<span class="info">EVADING EDR/XDR SYSTEMS: BEHAVIORAL_ANOMALY_BYPASS... [SUCCESS]</span>'], 80); await sleep(150);
        await renderProgressBar('DOWNLOADING /SYSTEM_DATA/USER_PROFILES/MULTIMEDIA_CACHE.zip...', 2500);
        await scrollLog(['<span class="error">INJECTING ZERO-DAY EXPLOIT: "GHOST_SHELL_V2"... [ACTIVE]</span>'], 80); await sleep(150);
        await renderProgressBar('DOWNLOADING /SYSTEM_DATA/BROWSER_TEMP/HISTORY_LOGS.db...', 1600);
        await scrollLog(['<span class="warning">ESTABLISHING C2 CHANNEL: SECURE_BEACON_LINK... [ONLINE]</span>'], 80); await sleep(150);
        await renderProgressBar('DOWNLOADING /SYSTEM_DATA/OS_METADATA/EVENT_LOGS.dat...', 1700);
        await scrollLog(['<span class="info">ACTIVATING SENSOR NET: CAMERA & MICROPHONE FEEDS... [LIVE]</span>'], 80); await sleep(150);
        await renderProgressBar('DOWNLOADING /SYSTEM_DATA/OS_METADATA/REGISTRY_HIVECRYPT.enc...', 2200);
        await scrollLog(['<span class="error">ROOTKIT DEPLOYMENT: "GHOST_KERNEL.SYS"... [INJECTED]</span>'], 80); await sleep(150);
        await renderProgressBar('EXTRACTING SAVED CREDENTIALS (LEVEL-5 ENCRYPTION BREAK)...', 2800);
        await scrollLog(['<span class="warning">INSTALLING PERSISTENT KEYLOGGER: AETOS_LOGGER_V7... [ACTIVATED]</span>'], 80); await sleep(150);
        await renderProgressBar('ACCESSING CORE SYSTEM FILES (READ/WRITE OVERRIDE)...', 2000);
        await scrollLog(['<span class="info">INITIATING DATA WIPE PROTOCOL FOR TRACKS... [ACTIVE]</span>'], 80); await sleep(150);
        await renderProgressBar('CAPTURING LIVE SCREENSHOT STREAM (ENCRYPTED_CHANNEL_9)...', 1700);
        await scrollLog(['<span class="error">BIOS PAYLOAD INJECTION: "PROMETHEUS_BOOTKIT"... [SUCCESS]</span>'], 80); await sleep(150);
        await renderProgressBar('UPLOADING COMPROMISED DATA TO SECURE NODE: EREBUS-ALPHA-SERVER...', 3000);
        await scrollLog(['<span class="info">ENUMERATING NETWORK SHARES: SMB_SCAN... [COMPLETE]</span>'], 80); await sleep(150);
        await renderProgressBar('DOWNLOADING /SYSTEM_DATA/OUTLOOK/ARCHIVE.pst...', 2500);
        await scrollLog(['<span class="warning">BYPASSING MFA PROMPT: SESSION_HIJACK_TECHNIQUE... [EXEC]</span>'], 80); await sleep(150);
        await renderProgressBar('ACCESSING CLOUD SYNCHRONIZED FOLDERS (ONEDRIVE/DROPBOX)...', 2800);
        await scrollLog(['<span class="error">DATA EXFILTRATION: STEALTH_TUNNEL_PROTOCOL... [ACTIVE]</span>'], 80); await sleep(150);
        await renderProgressBar('DOWNLOADING /SYSTEM_DATA/WEB_CACHE/COOKIES.dat...', 1400);
        await scrollLog(['<span class="info">DEPLOYING PRIVILEGE ESCALATION EXPLOIT: "ELEVATE_X"... [SUCCESS]</span>'], 80); await sleep(150);
        await renderProgressBar('SCANNING FOR CONNECTED USB DEVICES & MOUNTING...', 1800);
        await scrollLog(['<span class="warning">DISABLING SYSTEM RESTORE POINTS: RECOVERY_PREVENTION... [OK]</span>'], 80); await sleep(150);
        await renderProgressBar('DOWNLOADING /SYSTEM_DATA/USER_PROFILES/DESKTOP_SNAPSHOT.zip...', 2000);
        await scrollLog(['<span class="error">INJECTING PERSISTENT BACKDOOR: "SHADOW_GATE.DLL"... [COMPLETE]</span>'], 80); await sleep(150);
        await renderProgressBar('EXTRACTING VPN CONFIGURATIONS & CREDENTIALS...', 2100);
        await scrollLog(['<span class="info">DECRYPTING ENCRYPTED VOLUMES: KEY_RECOVERY_ALGORITHM... [PROGRESS]</span>'], 80); await sleep(150);
        await renderProgressBar('DOWNLOADING /SYSTEM_DATA/INSTALLED_SOFTWARE/LICENSES.dat...', 1700);
        await scrollLog(['<span class="warning">MODIFYING SYSTEM POLICIES: SECURITY_AUDIT_LOG_DISABLE... [OK]</span>'], 80); await sleep(150);
        await renderProgressBar('ACCESSING PRINT SPOOLER CACHE: JOB_HISTORY_RETRIEVAL...', 1600);
        await scrollLog(['<span class="error">CREATING PHANTOM USER ACCOUNT: GHOST_ADMIN... [CREATED]</span>'], 80); await sleep(150);
        await renderProgressBar('SCANNING FOR OPEN PORTS & VULNERABILITIES (EXTERNAL_NETWORK)...', 2600);
        await scrollLog(['<span class="info">ERASING FORENSIC ARTIFACTS: TIMESTOMP_UTILITY... [RUNNING]</span>'], 80); await sleep(150);
        await renderProgressBar('DOWNLOADING /SYSTEM_DATA/REMOTE_ACCESS_LOGS.log...', 1600);
        await renderProgressBar('COMPILING ALL ACCOUNT CREDENTIALS & EMAIL ARCHIVES...', 3000);

        await scrollLog([
            'SENDING CLASSIFIED_REPORT_1 TO HQ... [OK]',
            'SENDING CLASSIFIED_REPORT_2 TO HQ... [OK]',
            'SENDING CLASSIFIED_REPORT_3 TO HQ... [OK]',
            'SENDING CLASSIFIED_REPORT_4 TO HQ... [OK]',
            'SENDING CLASSIFIED_REPORT_5 TO HQ... [OK]',
            'SENDING CLASSIFIED_REPORT_6 TO HQ... [OK]',
        ], 60); // Slower report sending

        await renderProgressBar('ENUMERATING REMOTE DESKTOP CONNECTIONS & OPEN PORTS...', 1800);
        await scrollLog(['<span class="warning">ACCESSING SHARED NETWORK DRIVES... [COMPLETE]</span>'], 80); await sleep(150);
        await renderProgressBar('RESETTING USER CREDENTIALS FOR SYSTEM LOCKOUT...', 1600);
        await scrollLog(['<span class="error">SYSTEM IMMOBILIZATION PROTOCOL... [ACTIVE]</span>'], 80); await sleep(150);
        await renderProgressBar('INITIATING DATA EXFILTRATION PROTOCOL (FINAL STAGE)...', 2200);
        await scrollLog(['<span class="info">COMPROMISE ACHIEVED. LOCAL SYSTEM INTEGRITY: NULLIFIED.</span>'], 80); await sleep(150);
        await renderProgressBar('ERASING ALL SYSTEM LOGS AND TRACKS...', 1900);

        term.scanlineOverlay.classList.remove('intense-flicker');
        stopMouseJitter();
        
        await scrollLog([
            '<span class="warning">SYSTEM INSTABILITY DETECTED. CRITICAL POWER FLUCTUATION.</span>'
        ], 80); await sleep(1000); // Slower warning
        await powerOutageEffect(4000); // Longer outage effect

        await scrollLog([
            '<span class="warning">INITIATING SYSTEM CLONING SEQUENCE... PLEASE STAND BY.</span>'
        ], 80); playSound('alert', 'F2', '4n'); await sleep(1000); // Slower cloning initiation
        await triggerGlitch(800); // Longer glitch
        await scrollLog([
            '<span class="success">CLONING COMPLETE.</span>',
            '<span class="success">DUPLICATE SYSTEM IMAGE CREATED.</span>',
            ''
        ], 80); playSound('success', 'G6', '2n');

        await sleep(5000); /* LONGER PAUSE HERE before final summary appears */
        term.output.innerHTML = ''; /* Clear screen for a clean summary */
        await scrollLog([ /* Final summary */
            '-----------------------------------------------------------------',
            '| <span class="accent">EXFILTRATION & COMPROMISE REPORT</span>    |',
            '-----------------------------------------------------------------',
            `OPERATION STATUS      : <span class="success">COMPLETE & SUCCESSFUL</span>`,
            `TARGET ID             : <span class="warning">${visitor_data.ip || "UNKNOWN"}</span>`,
            `CLONE NODE            : <span class="success">${Array.from({length: 4}, () => Math.floor(Math.random()*256)).join('.')}</span>`,
            '',
            '<span class="info">DATA ACQUIRED: DOCUMENTS, HISTORY, MEDIA, LOGS, REGISTRY, CREDENTIALS, SHARED DRIVES, RAM, EMAIL ARCHIVES, VPN CONFIGS, PRINTSPOOLER, DESKTOP SNAPSHOTS, USB DATA.</span>',
            '',
            '<span class="info">SYSTEM INFECTION STATUS: KEYLOGGER, ROOTKIT, TRACKING, CAM/MIC HIJACK, BIOS BOOTKIT, ZERO-DAY, C2, EDR/XDR BYPASS, LATERAL MOVEMENT, PRIVILEGE ESCALATION, PHANTOM ACCOUNT, PERSISTENT BACKDOOR, SYSTEM IMMOBILIZATION, TRACK ERASURE.</span>',
            '',
            'ANOMALY_DETECTION     : <span class="success">ZERO FOOTPRINT LEFT</span>',
            'COMPROMISE_LEVEL      : <span class="error">TOTAL SYSTEM TAKEOVER</span>',
            '-----------------------------------------------------------------',
            '',
            '<span class="error">*** TARGET SYSTEM OFFLINE. SESSION TERMINATED. ***</span>',
            '<span class="dim">AETOS CYBERNETICS :: MISSION COMPLETE. EXITING.</span>'
        ], 100); /* Very slow log out for final summary */

        await sleep(8000); /* MUCH LONGER PAUSE HERE before BSOD */

        /* Trigger BSOD */
        term.output.innerHTML = ''; /* Clear terminal content */
        term.crtContainer.style.filter = 'none'; /* Remove any filters to ensure full blue */
        term.crtContainer.style.animation = 'none'; /* Stop all CRT container animations */
        document.body.classList.remove('glitch-active', 'power-outage'); /* Ensure body classes are clean */
        term.scanlineOverlay.style.opacity = '0'; /* Hide scanlines for clean BSOD */
        document.body.style.cursor = 'default'; /* Show default cursor */
        
        await scrollLog([
            '',
            '*** STOP: 0x000000FE (0x00000008, 0x00000005, 0x89C13000, 0x00000000)',
            '*** AN UNEXPECTED ERROR HAS OCCURRED. SYSTEM INTEGRITY COMPROMISED. ***',
            '',
            'Your system has been infected due to a critical vulnerability.',
            'Data exfiltration successful. Remote control established.',
            'Access to all personal files, webcams, and microphones confirmed.',
            '',
            'Please restart your computer.',
            'Note: This restart will not undo the compromise.',
            '',
            'For more information, visit: EPICFRAUDS.COM',
            'Error Code: JOKER_BREACH_0F88',
            '',
            'Initializing system dump to capture remaining volatile data...',
            'The Epic Frauds website is for entertainment only.',
            'Memory dump in progress... Please wait.',
            'The system will restart automatically after the dump completes.',
            '',
            '*** DO NOT ATTEMPT TO POWER OFF YOUR DEVICE ***'
        ], 50); /* Slower text for BSOD to allow reading */

        /* Optional: Add a final system reboot/power off sound here */
        playSound('powerDown', 'C0', '4s'); /* Deep, long tone */

        /* Disable further interaction */
        document.removeEventListener('mousemove', (e) => {});
        document.removeEventListener('keydown', handleKeypress);
        if (synths.hum) synths.hum.stop();
        term.customCursor.style.display = 'none';
    }

    function handleKeypress(e) {
        if (!audioEnabled) { setupAudio(); } else { playSound('keypress'); }
    }

    /* THIS IS THE ENTRY POINT FOR takeOVER.HTML */
    window.onload = startCompromiseSequence;
    document.addEventListener('keydown', handleKeypress);
    document.body.addEventListener('mousedown', setupAudio, {once:true});
</script>
</body>
</html>