<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>EREBUS INITIATIVE :: M.I.N.D. Honeypot Interface</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <style>
        /*
         * EPICFRAUDS.COM // JUSTICE, EXPOSED.
         * Project Chimera // Version 4.2 Final System Takeover Module
         * Developed by: AETOS Cybernetics Systems - Project Development Team (x1000)
         * Status: ONLINE / OPERATIONAL
         * Confidentiality Level: TOP SECRET // EYES ONLY
         */

        :root {
            --bg-color: #0000AA; /* Original Windows Blue Screen Blue - will be overridden for BSOD */
            --scanline-color: rgba(255, 255, 255, 0.1); /* White scanlines on blue */
            --glow-color: rgba(170, 255, 255, 0.8); /* Light blue/cyan glow */
            --text-color: #FFFFFF; /* White text */
            --error-color: #FF0000; /* Red error */
            --warning-color: #FFFF00; /* Yellow warning */
            --info-color: #AAFFFF; /* Light blue info */
            --accent-color: #FFFF00; /* Yellow accent */
            --crash-text-color: #FFFFFF;
            --crash-glow-color: rgba(255, 255, 255, 0.9);
            --matrix-color: rgba(170, 255, 255, 0.1); /* Subtle matrix rain blue */
            --matrix-char-color: rgba(170, 255, 255, 0.6); /* Brighter matrix characters */
        }

        html, body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Share Tech Mono', 'Consolas', 'Monaco', monospace;
            font-size: 16px;
            margin: 0; padding: 0;
            overflow: hidden;
            cursor: none; /* Hide default cursor */
            text-transform: uppercase;
            letter-spacing: 0.05em;
            user-select: none;
            -webkit-font-smoothing: antialiased;
            text-rendering: optimizeLegibility;
            display: flex; /* Use flexbox for centering BSOD content */
            justify-content: center;
            align-items: center;
            flex-direction: column; /* Stack items vertically */
        }

        #crt-container {
            width: 100vw; height: 100vh;
            overflow: hidden;
            position: relative;
            background: radial-gradient(ellipse at center, rgba(170,255,255,0.05) 0%, transparent 70%);
            box-shadow: inset 0 0 50px rgba(170, 255, 255, 0.2);
            animation: text-flicker 2.5s linear infinite alternate;
        }

        /* Glitch Effect */
        body.glitch-active #crt-container {
            animation: text-flicker 0.1s linear infinite,
                       glitch-flicker 0.05s infinite alternate;
        }
        @keyframes glitch-flicker {
            0% { transform: translate(0px, 0px) skewX(0deg); opacity: 1; }
            30% { transform: translate(2px, 1px) skewX(0.5deg); opacity: 0.8; }
            31% { transform: translate(-3px, -2px) skewX(-1deg); opacity: 1; }
            60% { transform: translate(1px, -1px) skewX(0.2deg); opacity: 0.9; }
            100% { transform: translate(0px, 0px) skewX(0deg); opacity: 1; }
        }

        /* Power Outage / Screen Shake Effect */
        body.power-outage #crt-container {
            animation: screen-shake 0.1s linear infinite alternate,
                       text-flicker-heavy 0.05s linear infinite;
            filter: brightness(0.7) contrast(1.2) hue-rotate(5deg);
        }
        @keyframes screen-shake {
            0% { transform: translate(1px, 1px); }
            25% { transform: translate(-1px, -1px); }
            50% { transform: translate(1.5px, -0.5px); }
            75% { transform: translate(-0.5px, 1.5px); }
            100% { transform: translate(1px, 1px); }
        }
        @keyframes text-flicker-heavy {
            0%, 100% { opacity: 1; } 10% { opacity: 0.7; } 20% { opacity: 1; }
            30% { opacity: 0.6; } 40% { opacity: 1; } 50% { opacity: 0.5; }
            60% { opacity: 1; } 70% { opacity: 0.8; } 80% { opacity: 1; }
            90% { opacity: 0.7; }
        }

        #terminal {
            width: calc(100% - 40px); height: calc(100% - 40px);
            padding: 20px; box-sizing: border-box;
            overflow-y: scroll; white-space: pre-wrap;
            word-break: break-all;
            text-shadow: 0 0 8px var(--glow-color), 0 0 4px rgba(0,0,0,0.5);
            scrollbar-width: none;
            position: relative; z-index: 2; transform: translateZ(0);
        }
        #terminal::-webkit-scrollbar { display: none; }

        #scanline-overlay {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            pointer-events: none;
            background: repeating-linear-gradient(0deg, var(--scanline-color), var(--scanline-color) 1px, transparent 1px, transparent 4px);
            animation: crt-flicker 0.1s infinite step-end;
            opacity: 0.9; z-index: 3;
        }

        /* Intense flicker for data transfer phase */
        #scanline-overlay.intense-flicker {
            animation: crt-flicker-intense 0.03s infinite step-end,
                       chromatic-flicker 0.1s linear infinite alternate;
            opacity: 0.98;
        }
        @keyframes crt-flicker-intense {
            0%, 100% { opacity: 0.98; } 25% { opacity: 0.6; } 50% { opacity: 0.95; } 75% { opacity: 0.65; }
        }
        @keyframes chromatic-flicker {
            0% { filter: hue-rotate(0deg); } 25% { filter: hue-rotate(2deg); } 50% { filter: hue-rotate(0deg); }
            75% { filter: hue-rotate(-2deg); } 100% { filter: hue-rotate(0deg); }
        }

        #vignette-overlay {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            pointer-events: none;
            box-shadow: inset 0 0 100px rgba(0,0,0,0.8); z-index: 4;
        }

        #matrix-overlay {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            pointer-events: none; overflow: hidden; z-index: 1; opacity: 0.08;
        }
        .matrix-column {
            position: absolute; width: 15px; white-space: nowrap; overflow: hidden;
            font-family: 'Share Tech Mono', monospace; font-size: 14px;
            color: var(--matrix-char-color); text-shadow: 0 0 5px var(--matrix-char-color);
            animation: matrix-fall linear infinite;
        }
        @keyframes matrix-fall { from { transform: translateY(-100%); } to { transform: translateY(100vh); } }

        @keyframes crt-flicker { 0%, 100% { opacity: 0.95; } 50% { opacity: 0.85; } }
        @keyframes text-flicker { 0% { opacity: 0.99; } 2% { opacity: 0.5; } 4% { opacity: 0.99; } 100% { opacity: 0.99; } }

        /* Chromatic Aberration (on terminal, not overlay) */
        #terminal::before, #terminal::after {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            z-index: -1; pointer-events: none;
        }
        #terminal::before { background-color: rgba(255, 0, 0, 0.02); transform: translate(-1px, -1px); }
        #terminal::after { background-color: rgba(0, 0, 255, 0.02); transform: translate(1px, 1px); }

        .cursor { /* Not used for the custom cursor effect anymore, keeping for blink effect if needed elsewhere */
            display: inline-block; background-color: var(--text-color);
            box-shadow: 0 0 12px var(--glow-color); width: 12px; height: 20px;
            animation: blink 0.7s step-end infinite; margin-left: 6px; vertical-align: bottom;
        }
        .cursor.off { animation: none; background-color: transparent; box-shadow: none; }
        @keyframes blink { 50% { background-color: transparent; box-shadow: none; } }
        .hidden { display: none; }
        .error { color: var(--error-color); text-shadow: 0 0 9px var(--error-color); }
        .warning { color: var(--warning-color); text-shadow: 0 0 9px var(--warning-color); }
        .success { color: #88FF88; text-shadow: 0 0 9px #88FF88; }
        .info { color: var(--info-color); text-shadow: 0 0 9px var(--info-color); }
        .accent { color: var(--accent-color); text-shadow: 0 0 9px var(--accent-color); }
        .dim { color: #AAAAAA; text-shadow: 0 0 3px #AAAAAA; }

        .progress-bar-container {
            border: 1px solid var(--text-color); padding: 3px; width: 75%; margin: 8px 0;
            box-shadow: inset 0 0 8px var(--glow-color); position: relative; overflow: hidden; background-color: rgba(0,0,0,0.3);
        }
        .progress-bar-fill {
            background-color: var(--text-color); height: 18px; width: 0%;
            transition: width 0.3s cubic-bezier(0.61,0.01,0.33,1.01);
        }
        .progress-bar-fill::after {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(45deg, rgba(255,255,255,0.15) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.15) 50%, rgba(255,255,255,0.15) 75%, transparent 75%, transparent);
            background-size: 20px 20px; animation: progress-stripes 0.5s linear infinite;
        }
        @keyframes progress-stripes { from { background-position: 20px 0; } to { background-position: 0 0; } }
        .progress-time { font-size: 0.9em; color: var(--dim); margin-left: 10px; }

        .ascii-3d {
            transform: perspective(600px) rotateX(2deg) rotateY(-3deg) scale(1.01);
            text-shadow: 3px 3px 10px rgba(170, 255, 255, 0.4); display: block; line-height: 1;
        }

        /* Custom Flashing Arrow Cursor */
        #custom-cursor {
            position: fixed;
            font-size: 2em; /* Make it visible */
            color: var(--accent-color); /* Yellow arrow */
            text-shadow: 0 0 10px var(--accent-color), 0 0 20px rgba(255, 255, 0, 0.5);
            pointer-events: none;
            z-index: 99;
            transform: translate(-50%, -50%);
            animation: cursor-flicker 0.15s step-end infinite alternate; /* Flashing effect */
        }

        @keyframes cursor-flicker {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        /* Joker ASCII Overlay */
        #joker-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            pointer-events: none;
            z-index: 10;
            opacity: 0;
            transition: opacity 0.3s ease-out;
        }

        #joker-overlay.show {
            opacity: 0.7;
            animation: joker-flash 2.5s ease-in-out forwards; /* Longer duration */
        }

        @keyframes joker-flash {
            0% { opacity: 0; transform: scale(0.7); }
            20% { opacity: 0.7; transform: scale(1.0); }
            80% { opacity: 0.7; transform: scale(1.0); }
            100% { opacity: 0; transform: scale(1.3); }
        }

        #joker-overlay pre {
            font-family: 'Share Tech Mono', monospace;
            font-size: clamp(30px, 15vw, 150px);
            color: var(--text-color);
            text-shadow: 0 0 20px var(--glow-color);
            line-height: 0.8;
            margin: 0; padding: 0;
            transform: scaleY(0.7);
            filter: blur(1px) contrast(1.5);
        }

        /* Hidden disclaimer */
        #hidden-disclaimer {
            position: absolute; top: 500vh; left: 0; width: 100%; text-align: center;
            font-size: 10px; color: rgba(255, 255, 255, 0.1); padding: 20px; white-space: pre-wrap;
            user-select: text; cursor: default; text-transform: none;
        }

        /* BSOD Specific Styles */
        .bsod-container {
            display: flex;
            flex-direction: column;
            justify-content: center; /* Center vertically */
            align-items: flex-start; /* Align text to the left */
            width: 100vw;
            height: 100vh;
            background-color: #0078D7; /* Windows Blue Screen Blue */
            color: #FFFFFF;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* More Windows-like font */
            padding: 5vw; /* Responsive padding */
            text-transform: none; /* No uppercase for BSOD text */
            letter-spacing: normal; /* Normal letter spacing */
            text-shadow: none; /* No text shadow for clean look */
            overflow: hidden; /* Ensure no scrollbars on BSOD */
        }

        .bsod-emoticon {
            font-size: 15vw; /* Large and responsive */
            line-height: 1;
            margin-bottom: 0.2em;
        }

        .bsod-message {
            font-size: 2vw; /* Responsive font size */
            line-height: 1.4;
            margin-bottom: 2em;
            max-width: 80%; /* Don't stretch too wide */
        }

        .bsod-percentage { /* This will be hidden in the new version */
            font-size: 1.8vw;
            margin-bottom: 4em;
        }

        .bsod-info-block { /* This will be hidden in the new version */
            display: flex;
            align-items: flex-start;
            gap: 2vw; /* Space between QR and text */
        }

        .bsod-qr-code { /* This will be hidden in the new version */
            width: 10vw; /* Responsive QR code size */
            height: 10vw;
            background-color: #FFFFFF; /* White background for QR code */
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0.5vw;
        }
        .bsod-qr-code img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .bsod-details { /* This will be hidden in the new version */
            font-size: 1.2vw;
            line-height: 1.5;
        }
        .bsod-details a {
            color: #FFFFFF;
            text-decoration: underline;
        }
    </style>
</head>
<body>
<div id="matrix-overlay"></div>
<div id="scanline-overlay"></div>
<div id="vignette-overlay"></div>
<div id="crt-container">
    <div id="terminal">
        <div id="output"></div>
        <div id="input-line" class="hidden">
            <span id="prompt">&gt; </span>
            <span id="input"></span>
            <span class="cursor"></span>
        </div>
    </div>
</div>

<div id="custom-cursor">></div> <!-- Custom arrow cursor -->


<div id="hidden-disclaimer">
    <p>
        -------------------------------------------------------------<br>
        ATTENTION! YOU HAVE STUMBLED UPON EPICFRAUDS.COM!<br>
        -------------------------------------------------------------<br>
        <br>
        THIS WEBSITE IS PURELY FOR ENTERTAINMENT PURPOSES. IT IS A PARODY<br>
        AND A JOKE DESIGNED TO PRANK YOUR FRIENDS. ABSOLUTELY NO MALICIOUS<br>
        ACTIVITY OR DATA COMPROMISE IS ACTUALLY OCCURRING.<br>
        <br>
        ALL "HACKING" SIMULATIONS, "IP ADDRESSES," "FILE DOWNLOADS," AND<br>
        "SYSTEM INFECTIONS" ARE FICTIONAL AND PART OF THE SCRIPTED DISPLAY.<br>
        YOUR DEVICE HAS NOT BEEN COMPROMISED. YOUR DATA IS SAFE.<br>
        <br>
        DO NOT USE THIS SCRIPT FOR ANY ACTUAL ILLEGAL OR HARMFUL ACTIVITIES.<br>
        IT IS INTENDED SOLELY FOR HUMOROUS PRANKS AND LIGHTHEARTED FUN.<br>
        <br>
        BY CONTINUING TO USE THIS SITE, YOU ACKNOWLEDGE AND AGREE TO THIS DISCLAIMER.<br>
        PLEASE PLAY RESPONSIBLY AND ETHICALLY.<br>
        <br>
        © 2025 EPICFRAUDS.COM - ALL JOKES RESERVED.<br>
        DEVELOPER TEAM: The AETOS Cybernetics Systems Group (Est. 2020)<br>
        CONTACT: support@epicfrauds.com (No, really, it's fake too!)
        <br>
        -------------------------------------------------------------
    </p>
</div>


<script>
    // --- Tone.js Synths ---
    let audioEnabled = false, synths = {};
    let humPitchModulationInterval = null;

    function setupAudio() {
        if (audioEnabled) return;
        try {
            Tone.start();
            // Adjusted sounds for more static/buzzing, less "beep"
            synths.keypress = new Tone.NoiseSynth({ noise: { type: 'pink' }, envelope: { attack: 0.005, decay: 0.08, sustain: 0.01, release: 0.05 }, volume: -25 }).toDestination();
            synths.success = new Tone.Synth({ oscillator: { type: 'sine' }, envelope: { attack: 0.01, decay: 0.1, sustain: 0.05, release: 0.3 }, volume: -15 }).toDestination(); // Still a synth, but softer
            synths.error = new Tone.NoiseSynth({ noise: { type: 'brownian' }, envelope: { attack: 0.01, decay: 0.2, sustain: 0.05, release: 0.3 }, volume: -12 }).toDestination(); // More harsh error
            
            // Core hum/static for background
            synths.hum = new Tone.Noise('white').toDestination(); // Use white noise for static
            synths.hum.volume.value = -20; // Volume for static
            synths.hum.start();

            // Modulate the static for a "radio tuning" effect
            const staticLFO = new Tone.LFO(5, -5, 5); // Faster LFO for static intensity fluctuation
            staticLFO.connect(synths.hum.volume);
            staticLFO.start();

            synths.alert = new Tone.NoiseSynth({ noise: { type: 'white' }, envelope: { attack: 0.001, decay: 0.3, sustain: 0, release: 0.3 }, volume: -10 }).toDestination(); // Alert is a static burst
            synths.scan = new Tone.NoiseSynth({ noise: { type: 'pink' }, envelope: { attack: 0.005, decay: 0.1, sustain: 0.02, release: 0.1 }, volume: -18 }).toDestination();
            synths.confirm = new Tone.NoiseSynth({ noise: { type: 'white' }, envelope: { attack: 0.001, decay: 0.2, sustain: 0.01, release: 0.2 }, volume: -15 }).toDestination(); // Confirmation is a sharper static
            synths.glitch = new Tone.NoiseSynth({ noise: { type: 'brownian' }, envelope: { attack: 0.001, decay: 0.05, sustain: 0.01, release: 0.05 }, volume: -18 }).toDestination();
            
            synths.staticBurst = new Tone.NoiseSynth({
                noise: { type: 'white' },
                envelope: { attack: 0.001, decay: 0.5, sustain: 0, release: 0.5 },
                volume: -8
            }).toDestination(); // Louder static burst
            synths.powerDown = new Tone.NoiseSynth({
                noise: { type: 'white' }, envelope: { attack: 0.001, decay: 1.5, sustain: 0.01, release: 1.5 }, volume: -5
            }).toDestination(); // Long static fade out
            synths.powerUp = new Tone.NoiseSynth({
                noise: { type: 'white' }, envelope: { attack: 0.001, decay: 1.5, sustain: 0.01, release: 1.5 }, volume: -5
            }).toDestination(); // Long static fade in

            audioEnabled = true;
        } catch (e) {
            console.error("Failed to setup audio. Continuing without sound:", e);
            audioEnabled = false;
        }
    }

    function playSound(sound, note = 'C4', duration = '8n') {
        if (!audioEnabled) return;
        try {
            if (synths[sound]) {
                // All sounds now use triggerAttackRelease for noise synths
                synths[sound].triggerAttackRelease(duration);
            }
        } catch (e) { console.warn("Audio playback failed for", sound, ":", e); }
    }

    // --- Terminal Logic ---
    const term = {
        output: document.getElementById('output'),
        crtContainer: document.getElementById('crt-container'),
        scanlineOverlay: document.getElementById('scanline-overlay'),
        customCursor: document.getElementById('custom-cursor'),
        jokerOverlay: document.getElementById('joker-overlay'),
        matrixOverlay: document.getElementById('matrix-overlay') // Added matrix overlay reference
    };
    const sleep = ms => new Promise(r => setTimeout(r, ms));
    let mouseJitterInterval = null;

    // --- Custom Flashing Arrow Cursor Logic ---
    function startMouseJitter() {
        document.body.classList.add('mouse-jitter');
        const jitterRange = 150; // Increased range for more erratic movement
        const intervalTime = 10; // Faster updates

        mouseJitterInterval = setInterval(() => {
            if (term.customCursor) {
                const mouseX = Math.random() * window.innerWidth;
                const mouseY = Math.random() * window.innerHeight;
                term.customCursor.style.left = `${mouseX}px`;
                term.customCursor.style.top = `${mouseY}px`;
            }
        }, intervalTime);
    }

    function stopMouseJitter() {
        clearInterval(mouseJitterInterval);
        mouseJitterInterval = null;
        document.body.classList.remove('mouse-jitter');
        if (term.customCursor) {
            term.customCursor.style.animation = 'none'; // Stop flashing
            term.customCursor.style.opacity = '0'; // Hide cursor
            term.customCursor.style.left = '-100px'; // Move off-screen
            term.customCursor.style.top = '-100px';
        }
    }

    // --- Matrix Rain Effect ---
    function createMatrixRain() {
        const matrixOverlay = document.getElementById('matrix-overlay');
        const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+-=[]{};':\"|,./<>?";
        const columnCount = Math.floor(window.innerWidth / 15);
        for (let i = 0; i < columnCount; i++) {
            const column = document.createElement('div');
            column.classList.add('matrix-column');
            column.style.left = `${i * 15}px`;
            column.style.animationDuration = `${Math.random() * 5 + 3}s`;
            column.style.animationDelay = `-${Math.random() * 5}s`;
            matrixOverlay.appendChild(column);
            let columnText = '';
            for (let j = 0; j < 50; j++) { columnText += chars[Math.floor(Math.random() * chars.length)] + '\n'; }
            column.textContent = columnText;
        }
    }

    async function getVisitorData() {
        const data = {};
        data.ua = navigator.userAgent;
        data.platform = navigator.platform;
        data.language = navigator.language;
        data.screen = `${window.screen.width}x${window.screen.height}x${window.screen.colorDepth}`;
        data.os = (ua => {
            if (ua.includes("Win")) return "WINDOWS NT";
            if (ua.includes("Mac")) return "DARWIN/MACOS";
            if (ua.includes("Linux")) return "LINUX KERNEL";
            if (ua.includes("Android")) return "ANDROID OS";
            if (ua.includes("iOS")) return "APPLE iOS";
            return "UNKNOWN";
        })(data.ua);
        data.browser = (ua => {
            if (ua.includes("Firefox")) return "FIREFOX QUANTUM";
            if (ua.includes("Chrome") && !ua.includes("Edge")) return "CHROMIUM-BASED (CHROME)";
            if (ua.includes("Edge")) return "CHROMIUM-BASED (EDGE)";
            if (ua.includes("Safari") && !ua.includes("Chrome")) return "WEBKIT/SAFARI";
            if (ua.includes("Opera") || ua.includes("OPR")) return "OPERA BROWSER";
            return "GENERIC BROWSER";
        })(data.ua);
        data.cores = navigator.hardwareConcurrency || 'N/A';
        data.vendor = navigator.vendor || 'N/A';

        // Additional simulated data for a richer profile
        data.plugins = Array.from(navigator.plugins).map(p => p.name).join(', ') || 'NONE DETECTED';
        data.doNotTrack = navigator.doNotTrack === '1' ? 'ENABLED' : 'DISABLED';
        
        // Stubs for real-time external data (simulated for prank)
        try {
            // Simulated IP data, replace with actual API call if you host this
            const ipApiResponse = await fetch('https://api.ipify.org?format=json');
            const ipData = await ipApiResponse.json();
            data.ip = ipData.ip;

            // Simulated geo-location data (for privacy, we won't use real geo-location)
            data.location = `FRANCONIA, VIRGINIA, UNITED STATES`; // Based on current context
            data.org = 'VIRGINIA TELECOMMUNICATIONS INC.';
            data.isp = 'COMCAST CABLE';
            data.vpn = Math.random() > 0.8 ? 'DETECTED' : 'NONE'; // Randomly detect VPN
        } catch (e) {
            console.warn("Real IP/Geolocation API failed (simulating):", e);
            data.ip = '192.168.1.100'; // Fallback to a common local IP if API fails
            data.location = 'UNRESOLVED (LOCAL NETWORK)';
            data.org = 'UNKNOWN_ISP';
            data.isp = 'LOCAL_NETWORK_PROVIDER';
            data.vpn = 'POSSIBLE (NETWORK OBSCURATION)';
        }
        return data;
    }


    async function scrollLog(lines, delay = 20) { // Default delay for readability
        for (const line of lines) {
            term.output.innerHTML += `<span>${line}</span>\n`;
            term.output.parentElement.scrollTop = term.output.parentElement.scrollHeight;
            await sleep(delay);
        }
    }

    async function showAscii(asciiLines, className = 'accent', delay = 50) {
        for(const line of asciiLines) {
            term.output.innerHTML += `<span class="${className}">${line}</span>\n`;
            term.output.parentElement.scrollTop = term.output.parentElement.scrollHeight;
            await sleep(delay);
        }
    }

    async function renderProgressBar(label, duration = 1000) {
        const startTime = performance.now();
        const container = document.createElement('div');
        container.innerHTML = `<span>${label}</span><div class="progress-bar-container"><div class="progress-bar-fill"></div></div><span class="progress-time"></span>`;
        term.output.appendChild(container);
        const fill = container.querySelector('.progress-bar-fill');
        const timeSpan = container.querySelector('.progress-time');
        term.output.parentElement.scrollTop = term.output.parentElement.scrollHeight;
        playSound('scan', 'C3', '64n'); // Faster scan sound
        await sleep(50); // Small initial delay
        fill.style.width = '100%'; 
        await sleep(duration);
        playSound('confirm', 'C6', '128n'); // Sharper confirm sound
        const endTime = performance.now(); const timeTaken = ((endTime - startTime) / 1000).toFixed(2);
        timeSpan.textContent = ` (${timeTaken}s)`;
        await scrollLog(['<span class="success">COMPLETE.</span>'], 5); // Very fast completion message
    }

    async function triggerGlitch(duration = 500) {
        document.body.classList.add('glitch-active');
        playSound('glitch', null, '0.1s'); await sleep(duration);
        document.body.classList.remove('glitch-active');
    }
    
    async function powerOutageEffect(durationMs = 3000) {
        document.body.classList.add('power-outage');
        playSound('powerDown', 'C1', '2s'); playSound('staticBurst', null, '0.5s');
        const startTime = performance.now();
        while (performance.now() - startTime < durationMs) {
            term.crtContainer.style.filter = `brightness(${0.7 + Math.random() * 0.3}) contrast(${1.2 + Math.random() * 0.3}) hue-rotate(${Math.random() * 10 - 5}deg)`;
            term.scanlineOverlay.style.opacity = `${0.6 + Math.random() * 0.4}`;
            if (Math.random() < 0.2) playSound('staticBurst', null, '0.1s');
            await sleep(50 + Math.random() * 50);
        }
        document.body.classList.remove('power-outage');
        term.crtContainer.style.filter = ''; term.scanlineOverlay.style.opacity = '0.9';
        playSound('powerUp', 'C6', '0.5s');
    }

    async function flashJokerMask(duration = 1000) {
        if (!term.jokerOverlay) {
            console.warn("Joker overlay not found. Skipping flash.");
            return;
        }
        term.jokerOverlay.classList.remove('hidden');
        term.jokerOverlay.classList.add('show');
        playSound('alert', null, '0.5s'); // Static alert
        await sleep(duration);
        term.jokerOverlay.classList.remove('show');
        term.jokerOverlay.classList.add('hidden');
    }

    async function rapidIpScan(baseIp, count = 40, delay = 10) {
        await scrollLog(['<span class="info">NETWORK INFECTION: LATERAL MOVEMENT...</span>'], 15);
        const ipParts = baseIp.split('.'); const base = ipParts.slice(0, 3).join('.');
        for (let i = 0; i < count; i++) {
            const randomLastOctet = Math.floor(Math.random() * 254) + 1;
            const currentIp = `${base}.${randomLastOctet}`;
            const status = Math.random() > 0.3 ? '<span class="success">[COMPROMISED]</span>' : '<span class="warning">[DENIED]</span>';
            term.output.innerHTML += `<span>  > ACCESS: ${currentIp} ${status}</span>\n`;
            term.output.parentElement.scrollTop = term.output.parentElement.scrollHeight;
            playSound('keypress', null, '64n'); await sleep(delay); // Rapid static for scan
        }
        await scrollLog(['<span class="success">LATERAL MOVEMENT COMPLETE.</span>'], 15);
    }

    // --- Main Compromise Sequence ---
    async function startCompromiseSequence() {
        createMatrixRain();
        setupAudio();
        
        const d = await getVisitorData();
        window.visitor_data = d;

        await scrollLog([
            'BIOS INITIALIZING...',
            'MEMORY: 4096GB DDR6 ECC, CPU: XEON E8-9590 vPro, CORES: 192',
            'FIRMWARE: VERIFIED',
            'SECURE BOOT: ENABLED',
            'AETOS CYBERNETIC SYSTEMS',
        ], 10); await sleep(200);
        await showAscii([
            "        _     _____ _______  ____ ",
            "       / \\   |_  _|__  /  \\ ",
            "      / _ \\    | |    / /| |",
            "     / ___ \\   | |   / /_| |",
            "    /_/   \\_\\  |_|  /____|_|"
        ], 'info ascii-3d', 30); await sleep(50);
        await scrollLog([
            'LOADING KERNEL... [LOADED]',
            'KERNEL INTEGRITY: [HASH MATCH]',
            'SYSTEMD: [ACTIVE]',
            'FSCK PASSED. INTEGRITY: [██████████████████] 100%'
        ], 15);
        await renderProgressBar('INITIALIZING CORE SYSTEM MODULES...', 300); await sleep(100);
        await scrollLog([
            'NETWORK: ACTIVE | FIREWALL: ONLINE',
            'SSH: SECURE',
            'REMOTE DESKTOP: CRITICAL',
            'ANONYMOUS ROOT ACCESS: ENABLED',
            'VISITOR PRIVILEGES: ELEVATED (ROOT)',
            '',
            'AUTHENTICATING SESSION...',
            ` - VISITOR HASH: ${Math.random().toString(36).slice(2,10).toUpperCase()}`,
            ' - SECURITY CLEARANCE: TOP SECRET',
            ' - THREATS: NONE DETECTED'
        ], 20); await sleep(300);

        await showAscii([
            "         ______ _____  _____ ",
            "        | ____|  __ \\| ____|",
            "        | |__  | |__) | |__ ",
            "        |  __| |  _  /|  __|",
            "        | |____| | \\ \\| |___",
            "        |______|__|  \\_\\______"
        ], 'accent ascii-3d', 30); await sleep(50);

        await showAscii([
            "    0 1 0 0 1 1",
            "    1 0 1 1 0 1 0",
            "  0 1 0 1 0 1 1 0",
            "    1 0 1 0 0 1 0",
            "    0 1 1 1 0 1"
        ], 'accent ascii-3d', 30); await sleep(50);

        await scrollLog([
            'INITIATING VISITOR DEVICE INTELLIGENCE ACQUISITION...',
            '<span class="dim">    (SYSTEM FINGERPRINTING & ENVIRONMENTAL SCAN...)</span>'
        ], 20);
        await renderProgressBar('PERFORMING DEEP SCAN OF CLIENT ENVIRONMENT...', 400); await sleep(80);
        
        await scrollLog([
            '-----------------------------------------------------',
            '| <span class="accent">VISITOR SYSTEM PROFILE / THREAT ASSESSMENT</span>      |',
            '-----------------------------------------------------',
            `> IP_ADDRESS          : <span class="warning">${d.ip || '?'}</span>`,
            `> ISP_PROVIDER        : <span class="info">${d.isp || '?'}</span>`,
            `> GEO-LOCATION        : <span class="warning">${d.location || '?'}</span>`,
            `> NETWORK_TYPE        : <span class="info">${d.vpn === 'DETECTED' ? 'VPN/PROXY' : 'DIRECT'}</span>`,
            `> TIME_ZONE           : <span class="info">${Intl.DateTimeFormat().resolvedOptions().timeZone || '?'}</span>`,
            `> LANGUAGE_PREF       : <span class="info">${d.language || '?'}</span>`,
            `> OS_PLATFORM         : <span class="info">${d.os}</span> / <span class="info">${d.platform}</span>`,
            `> BROWSER_AGENT       : <span class="info">${d.browser}</span>`,
            `> SCREEN_RESOLUTION   : <span class="info">${d.screen || '?'}</span>`,
            `> CPU_CORES           : <span class="info">${d.cores || '?'}</span>`,
            `> INSTALLED_PLUGINS   : <span class="info">${d.plugins || '?'}</span>`,
            `> DO_NOT_TRACK_FLAG   : <span class="info">${d.doNotTrack || '?'}</span>`,
            `> VIRTUAL_ENV         : <span class="info">${d.vendor.includes('Google Inc.') && d.ua.includes('HeadlessChrome') ? 'POSSIBLE (VIRTUAL MACHINE)' : 'PHYSICAL (APPARENT)'}</span>`,
            '-----------------------------------------------------'
        ], 35); 
        await sleep(5000); // PAUSE FOR 5 SECONDS AFTER ALL VISITOR INFO

        await scrollLog(['<span class="success">M.I.N.D. LINK ESTABLISHED. PROTOCOL SYNCHRONIZED.</span>', '<span class="success">PRIVILEGES: ROOT ACCESS [ADMINISTRATIVE CONTROL]</span>', ''], 25);
        await scrollLog(['<span class="info">INITIATING HIGH-SPEED DATA EXFILTRATION & SYSTEM INFECTION...</span>'], 15); await sleep(200);

        term.scanlineOverlay.classList.add('intense-flicker');
        term.customCursor.style.display = 'block'; // Show custom cursor
        startMouseJitter();

        await rapidIpScan(d.ip || '192.168.1.1', 40, 5); await sleep(100); // Faster IP scan
        await flashJokerMask(1000); // Faster Joker flash
        await sleep(200);
        await triggerGlitch(150); // Glitch after Joker

        await renderProgressBar('ENCRYPTED TUNNEL ESTABLISHMENT: QUANTUM_SECURE_CHANNEL...', 250);
        await scrollLog(['<span class="warning">DEPLOYING AUTONOMOUS TRACKING MODULE... [OK]</span>'], 5); await sleep(20);
        await renderProgressBar('OS_LEVEL HOOK INJECTION: KERNEL_API_INTERCEPTION...', 300);
        await scrollLog(['<span class="error">MEMORY DUMP INITIATED: VOLATILE_DATA_ACQUISITION... [LIVE]</span>'], 5); await sleep(20);
        await renderProgressBar('DOWNLOADING /SYSTEM_DATA/USER_PROFILES/DOCUMENTS.zip...', 350);
        await scrollLog(['<span class="info">EVADING EDR/XDR SYSTEMS: BEHAVIORAL_ANOMALY_BYPASS... [SUCCESS]</span>'], 5); await sleep(20);
        await triggerGlitch(100);
        await renderProgressBar('DOWNLOADING /SYSTEM_DATA/USER_PROFILES/MULTIMEDIA_CACHE.zip...', 400);
        await scrollLog(['<span class="error">INJECTING ZERO-DAY EXPLOIT: "GHOST_SHELL_V2"... [ACTIVE]</span>'], 5); await sleep(20);
        await renderProgressBar('DOWNLOADING /SYSTEM_DATA/BROWSER_TEMP/HISTORY_LOGS.db...', 280);
        await scrollLog(['<span class="warning">ESTABLISHING C2 CHANNEL: SECURE_BEACON_LINK... [ONLINE]</span>'], 5); await sleep(20);
        await renderProgressBar('DOWNLOADING /SYSTEM_DATA/OS_METADATA/EVENT_LOGS.dat...', 320);
        await scrollLog(['<span class="info">ACTIVATING SENSOR NET: CAMERA & MICROPHONE FEEDS... [LIVE]</span>'], 5); await sleep(20);
        await triggerGlitch(120);
        await renderProgressBar('DOWNLOADING /SYSTEM_DATA/OS_METADATA/REGISTRY_HIVECRYPT.enc...', 450);
        await scrollLog(['<span class="error">ROOTKIT DEPLOYMENT: "GHOST_KERNEL.SYS"... [INJECTED]</span>'], 5); await sleep(20);
        await renderProgressBar('EXTRACTING SAVED CREDENTIALS (LEVEL-5 ENCRYPTION BREAK)...', 500);
        await scrollLog(['<span class="warning">INSTALLING PERSISTENT KEYLOGGER: AETOS_LOGGER_V7... [ACTIVATED]</span>'], 5); await sleep(20);
        await renderProgressBar('ACCESSING CORE SYSTEM FILES (READ/WRITE OVERRIDE)...', 400);
        await scrollLog(['<span class="info">INITIATING DATA WIPE PROTOCOL FOR TRACKS... [ACTIVE]</span>'], 5); await sleep(20);
        await triggerGlitch(100);
        await renderProgressBar('CAPTURING LIVE SCREENSHOT STREAM (ENCRYPTED_CHANNEL_9)...', 300);
        await scrollLog(['<span class="error">BIOS PAYLOAD INJECTION: "PROMETHEUS_BOOTKIT"... [SUCCESS]</span>'], 5); await sleep(20);
        await renderProgressBar('UPLOADING COMPROMISED DATA TO SECURE NODE: EREBUS-ALPHA-SERVER...', 600);
        await scrollLog(['<span class="info">ENUMERATING NETWORK SHARES: SMB_SCAN... [COMPLETE]</span>'], 5); await sleep(20);
        await renderProgressBar('DOWNLOADING /SYSTEM_DATA/OUTLOOK/ARCHIVE.pst...', 500);
        await scrollLog(['<span class="warning">BYPASSING MFA PROMPT: SESSION_HIJACK_TECHNIQUE... [EXEC]</span>'], 5); await sleep(20);
        await triggerGlitch(130);
        await renderProgressBar('ACCESSING CLOUD SYNCHRONIZED FOLDERS (ONEDRIVE/DROPBOX)...', 550);
        await scrollLog(['<span class="error">DATA EXFILTRATION: STEALTH_TUNNEL_PROTOCOL... [ACTIVE]</span>'], 5); await sleep(20);
        await renderProgressBar('DOWNLOADING /SYSTEM_DATA/WEB_CACHE/COOKIES.dat...', 200);
        await scrollLog(['<span class="info">DEPLOYING PRIVILEGE ESCALATION EXPLOIT: "ELEVATE_X"... [SUCCESS]</span>'], 5); await sleep(20);
        await renderProgressBar('SCANNING FOR CONNECTED USB DEVICES & MOUNTING...', 300);
        await scrollLog(['<span class="warning">DISABLING SYSTEM RESTORE POINTS: RECOVERY_PREVENTION... [OK]</span>'], 5); await sleep(20);
        await triggerGlitch(110);
        await renderProgressBar('DOWNLOADING /SYSTEM_DATA/USER_PROFILES/DESKTOP_SNAPSHOT.zip...', 400);
        await scrollLog(['<span class="error">INJECTING PERSISTENT BACKDOOR: "SHADOW_GATE.DLL"... [COMPLETE]</span>'], 5); await sleep(20);
        await renderProgressBar('EXTRACTING VPN CONFIGURATIONS & CREDENTIALS...', 420);
        await scrollLog(['<span class="info">DECRYPTING ENCRYPTED VOLUMES: KEY_RECOVERY_ALGORITHM... [PROGRESS]</span>'], 5); await sleep(20);
        await renderProgressBar('DOWNLOADING /SYSTEM_DATA/INSTALLED_SOFTWARE/LICENSES.dat...', 330);
        await scrollLog(['<span class="warning">MODIFYING SYSTEM POLICIES: SECURITY_AUDIT_LOG_DISABLE... [OK]</span>'], 5); await sleep(20);
        await triggerGlitch(140);
        await renderProgressBar('ACCESSING PRINT SPOOLER CACHE: JOB_HISTORY_RETRIEVAL...', 270);
        await scrollLog(['<span class="error">CREATING PHANTOM USER ACCOUNT: GHOST_ADMIN... [CREATED]</span>'], 5); await sleep(20);
        await renderProgressBar('SCANNING FOR OPEN PORTS & VULNERABILITIES (EXTERNAL_NETWORK)...', 480);
        await scrollLog(['<span class="info">ERASING FORENSIC ARTIFACTS: TIMESTOMP_UTILITY... [RUNNING]</span>'], 5); await sleep(20);
        await renderProgressBar('DOWNLOADING /SYSTEM_DATA/REMOTE_ACCESS_LOGS.log...', 290);
        await renderProgressBar('COMPILING ALL ACCOUNT CREDENTIALS & EMAIL ARCHIVES...', 550);
        await scrollLog(['<span class="accent">QUANTUM ENTANGLEMENT CRYPTOGRAPHIC DECRYPTION: [SUCCESS]</span>'], 5); await sleep(20);
        await renderProgressBar('ESTABLISHING QUANTUM-SECURE BACKDOOR...', 450);
        await scrollLog(['<span class="error">ZERO-TRUST NETWORK ARCHITECTURE BYPASS: [INITIATED]</span>'], 5); await sleep(20);
        await triggerGlitch(150);
        await renderProgressBar('INJECTING SUPPLY CHAIN COMPROMISE VIA SOFTWARE-DEFINED PERIMETERS...', 600);
        await scrollLog(['<span class="warning">AI-DRIVEN POLYMORPHIC MALWARE GENERATION: [DEPLOYING]</span>'], 5); await sleep(20);
        await renderProgressBar('ACTIVATING HARDWARE-LEVEL BACKDOOR (INTEL ME/AMD PSP EXPLOITATION)...', 700);
        await scrollLog(['<span class="info">NEURAL NETWORK RECONFIGURATION FOR AUTONOMOUS DRONE CONTROL: [OVERRIDE]</span>'], 5); await sleep(20);
        await triggerGlitch(120);
        await renderProgressBar('TEMPORAL DATA RECONSTRUCTION FROM VOLATILE MEMORY...', 500);
        await scrollLog(['<span class="accent">GRAVITATIONAL WAVE COMMUNICATION INTERCEPT: [ACTIVE]</span>'], 5); await sleep(20);
        await renderProgressBar('SUBVERTING QUANTUM-RESISTANT ENCRYPTION PROTOCOLS...', 650);
        await scrollLog(['<span class="error">ACTIVE EXFILTRATION CHANNEL: BLACK HOLE PROTOCOL (BHP-001)</span>'], 5); await sleep(20);
        await renderProgressBar('DEPLOYING QUANTUM DOT SELF-REPLICATING PAYLOADS...', 700);
        await scrollLog(['<span class="warning">RECONFIGURING DNS RESOLUTION FOR REDIRECTION ATTACKS... [DONE]</span>'], 5); await sleep(20);
        await triggerGlitch(160);
        
        await scrollLog([
            'SENDING CLASSIFIED_REPORT_1 TO HQ... [OK]',
            'SENDING CLASSIFIED_REPORT_2 TO HQ... [OK]',
            'SENDING CLASSIFIED_REPORT_3 TO HQ... [OK]',
            'SENDING CLASSIFIED_REPORT_4 TO HQ... [OK]',
            'SENDING CLASSIFIED_REPORT_5 TO HQ... [OK]',
            'SENDING CLASSIFIED_REPORT_6 TO HQ... [OK]',
        ], 10); // Faster report sending

        await renderProgressBar('ENUMERATING REMOTE DESKTOP CONNECTIONS & OPEN PORTS...', 350);
        await scrollLog(['<span class="warning">ACCESSING SHARED NETWORK DRIVES... [COMPLETE]</span>'], 5); await sleep(20);
        await renderProgressBar('RESETTING USER CREDENTIALS FOR SYSTEM LOCKOUT...', 280);
        await scrollLog(['<span class="error">SYSTEM IMMOBILIZATION PROTOCOL... [ACTIVE]</span>'], 5); await sleep(20);
        await renderProgressBar('INITIATING DATA EXFILTRATION PROTOCOL (FINAL STAGE)...', 450);
        await scrollLog(['<span class="info">COMPROMISE ACHIEVED. LOCAL SYSTEM INTEGRITY: NULLIFIED.</span>'], 5); await sleep(20);
        await renderProgressBar('ERASING ALL SYSTEM LOGS AND TRACKS...', 380);

        term.scanlineOverlay.classList.remove('intense-flicker');
        stopMouseJitter();
        
        await scrollLog([
            '<span class="warning">SYSTEM INSTABILITY DETECTED. CRITICAL POWER FLUCTUATION.</span>'
        ], 30); await sleep(500);
        await powerOutageEffect(3000);

        await scrollLog([
            '<span class="warning">INITIATING SYSTEM CLONING SEQUENCE... PLEASE STAND BY.</span>'
        ], 30); playSound('alert', null, '0.8s'); await sleep(800);
        await triggerGlitch(600);
        await scrollLog([
            '<span class="success">CLONING COMPLETE.</span>',
            '<span class="success">DUPLICATE SYSTEM IMAGE CREATED.</span>',
            ''
        ], 30); playSound('success', null, '0.5s');

        await sleep(2500); // Longer pause before final summary appears
        term.output.innerHTML = ''; // Clear screen for a clean summary
        await scrollLog([ /* Final summary */
            '-----------------------------------------------------------------',
            '| <span class="accent">EXFILTRATION & COMPROMISE REPORT</span>    |',
            '-----------------------------------------------------------------',
            `OPERATION STATUS      : <span class="success">COMPLETE & SUCCESSFUL</span>`,
            `TARGET ID             : <span class="warning">${d.ip || "UNKNOWN"}</span>`,
            `CLONE NODE            : <span class="success">${Array.from({length: 4}, () => Math.floor(Math.random()*256)).join('.')}</span>`,
            '',
            '<span class="info">--- DATA ACQUIRED ---</span>',
            '<span class="dim">- /SYSTEM_DATA/USER_PROFILES/DOCUMENTS.zip</span>',
            '<span class="dim">- /SYSTEM_DATA/USER_PROFILES/MULTIMEDIA_CACHE.zip</span>',
            '<span class="dim">- /SYSTEM_DATA/BROWSER_TEMP/HISTORY_LOGS.db</span>',
            '<span class="dim">- /SYSTEM_DATA/OS_METADATA/EVENT_LOGS.dat</span>',
            '<span class="dim">- /SYSTEM_DATA/OS_METADATA/REGISTRY_HIVECRYPT.enc</span>',
            '<span class="dim">- SAVED CREDENTIALS (LEVEL-5 DECRYPTION)</span>',
            '<span class="dim">- LIVE SCREENSHOT STREAM</span>',
            '<span class="dim">- /SYSTEM_DATA/OUTLOOK/ARCHIVE.pst</span>',
            '<span class="dim">- CLOUD SYNCHRONIZED FOLDERS (ONEDRIVE/DROPBOX)</span>',
            '<span class="dim">- /SYSTEM_DATA/WEB_CACHE/COOKIES.dat</span>',
            '<span class="dim">- CONNECTED USB DEVICE DATA</span>',
            '<span class="dim">- /SYSTEM_DATA/USER_PROFILES/DESKTOP_SNAPSHOT.zip</span>',
            '<span class="dim">- VPN CONFIGURATIONS & CREDENTIALS</span>',
            '<span class="dim">- ENCRYPTED VOLUME KEY RECOVERY (PARTIAL)</span>',
            '<span class="dim">- /SYSTEM_DATA/INSTALLED_SOFTWARE/LICENSES.dat</span>',
            '<span class="dim">- PRINT SPOOLER CACHE & JOB HISTORY</span>',
            '<span class="dim">- REMOTE ACCESS LOGS</span>',
            '<span class="dim">- ALL ACCOUNT CREDENTIALS & EMAIL ARCHIVES</span>',
            '<span class="dim">- TEMPORAL DATA FROM VOLATILE MEMORY</span>',
            '',
            '<span class="info">--- INFECTION & CONTROL ITEMS DEPLOYED ---</span>',
            '<span class="dim">- AUTONOMOUS TRACKING MODULE</span>',
            '<span class="dim">- OS-LEVEL HOOK (KERNEL_API_INTERCEPTION)</span>',
            '<span class="dim">- ZERO-DAY EXPLOIT ("GHOST_SHELL_V2")</span>',
            '<span class="dim">- C2 CHANNEL (SECURE_BEACON_LINK)</span>',
            '<span class="dim">- SENSOR NET (CAMERA & MICROPHONE FEEDS)</span>',
            '<span class="dim">- ROOTKIT ("GHOST_KERNEL.SYS")</span>',
            '<span class="dim">- PERSISTENT KEYLOGGER (AETOS_LOGGER_V7)</span>',
            '<span class="dim">- BIOS PAYLOAD INJECTION ("PROMETHEUS_BOOTKIT")</span>',
            '<span class="dim">- EDR/XDR SYSTEMS EVADED (BEHAVIORAL_ANOMALY_BYPASS)</span>',
            '<span class="dim">- MFA PROMPT BYPASSED (SESSION_HIJACK_TECHNIQUE)</span>',
            '<span class="dim">- PRIVILEGE ESCALATION EXPLOIT ("ELEVATE_X")</span>',
            '<span class="dim">- SYSTEM RESTORE POINTS DISABLED</span>',
            '<span class="dim">- PERSISTENT BACKDOOR ("SHADOW_GATE.DLL")</span>',
            '<span class="dim">- PHANTOM USER ACCOUNT ("GHOST_ADMIN")</span>',
            '<span class="dim">- FORENSIC ARTIFACTS ERASED (TIMESTOMP_UTILITY)</span>',
            '<span class="dim">- QUANTUM-SECURE BACKDOOR</span>',
            '<span class="dim">- ZERO-TRUST NETWORK ARCHITECTURE BYPASS</span>',
            '<span class="dim">- SUPPLY CHAIN COMPROMISE VIA SDN</span>',
            '<span class="dim">- AI-DRIVEN POLYMORPHIC MALWARE</span>',
            '<span class="dim">- HARDWARE-LEVEL BACKDOOR ACTIVATION (ME/PSP EXPLOITATION)</span>',
            '<span class="dim">- NEURAL NETWORK RECONFIGURATION FOR DRONE CONTROL</span>',
            '<span class="dim">- GRAVITATIONAL WAVE COMMUNICATION INTERCEPT MODULE</span>',
            '<span class="dim">- QUANTUM-RESISTANT ENCRYPTION SUBVERSION</span>',
            '<span class="dim">- QUANTUM DOT SELF-REPLICATING PAYLOADS</span>',
            '<span class="dim">- DNS RESOLUTION REDIRECTION</span>',
            '',
            'ANOMALY_DETECTION     : <span class="success">ZERO FOOTPRINT LEFT</span>',
            'COMPROMISE_LEVEL      : <span class="error">TOTAL SYSTEM TAKEOVER</span>',
            '-----------------------------------------------------------------',
            '',
            '<span class="error">*** TARGET SYSTEM OFFLINE. SESSION TERMINATED. ***</span>',
            '<span class="dim">AETOS CYBERNETICS :: MISSION COMPLETE. EXITING.</span>'
        ], 60); /* Slower log out for final summary */

        await sleep(8000); /* MUCH LONGER PAUSE HERE before BSOD */

        /* Trigger BSOD */
        // Hide all existing overlays and terminal content
        term.output.innerHTML = '';
        term.crtContainer.style.display = 'none';
        term.scanlineOverlay.style.display = 'none';
        term.vignetteOverlay.style.display = 'none';
        term.matrixOverlay.style.display = 'none';
        term.jokerOverlay.style.display = 'none';
        stopMouseJitter(); // Ensure custom cursor is hidden

        // Set body background and styles for BSOD
        document.body.style.backgroundColor = '#0078D7'; /* Windows Blue */
        document.body.style.fontFamily = "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif";
        document.body.style.color = '#FFFFFF';
        document.body.style.textTransform = 'none';
        document.body.style.letterSpacing = 'normal';
        document.body.style.justifyContent = 'flex-start'; /* Align content to start for BSOD */
        document.body.style.alignItems = 'flex-start'; /* Align content to start for BSOD */
        document.body.style.padding = '5vw'; /* Responsive padding */

        // Create BSOD content
        const bsodContent = document.createElement('div');
        bsodContent.classList.add('bsod-container');
        bsodContent.innerHTML = `
            <div class="bsod-emoticon">:(</div>
            <div class="bsod-message">
                Your PC ran into a problem and needs to restart. We're<br>
                just collecting some error info, and then we'll restart for you. (<span id="bsod-percent">0%</span> complete)
            </div>
            <div class="bsod-details-bottom">
                If you'd like to know more, you can search online later for this error <span class="stop-code">PDP_DETECTED_FATAL_ERROR</span>
            </div>
        `;
        document.body.innerHTML = ''; // Clear everything from body
        document.body.appendChild(bsodContent); // Add BSOD content

        const percentageElement = document.getElementById('bsod-percent'); // Get element by ID
        let percentage = 0;
        const percentageInterval = setInterval(() => {
            percentage += 1;
            if (percentage <= 100) {
                percentageElement.textContent = `${percentage}%`;
            } else {
                clearInterval(percentageInterval);
            }
        }, 50); // Increment every 50ms

        // Stop all audio after a short delay to let the initial static burst play
        setTimeout(() => {
            if (synths.hum) synths.hum.stop();
            // Stop other synths if they are still playing
            for (const key in synths) {
                if (synths[key] && synths[key].state === 'started') {
                    synths[key].stop();
                }
            }
        }, 1000); // Stop audio after 1 second
    }

    function handleKeypress(e) {
        if (!audioEnabled) { setupAudio(); } else { playSound('keypress', null, '64n'); }
    }

    window.onload = startCompromiseSequence;
    document.addEventListener('keydown', handleKeypress);
    document.body.addEventListener('mousedown', setupAudio, {once:true});
</script>
</body>
</html>
